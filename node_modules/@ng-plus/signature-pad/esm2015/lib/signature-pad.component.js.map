{
  "version": 3,
  "file": "signature-pad.component.js",
  "sources": [
    "ng://@ng-plus/signature-pad/projects/signature-pad/src/lib/signature-pad.component.ts"
  ],
  "sourcesContent": [
    "import {AfterViewInit, Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild} from \"@angular/core\";\nimport * as SignaturePad from 'signature_pad/dist/signature_pad';\n\n@Component({\n    selector: 'ng-signature-pad',\n    template: `<div class=\"signature-pad\">\r\n    <canvas\r\n        [width]=\"width\"\r\n        [height]=\"height\"\r\n        #canvas></canvas>\r\n    <div class=\"buttons\">\r\n        <button [class]=\"doneButtonClass\" *ngIf=\"showDoneButton\" (click)=\"emitPointsAndBlob()\">{{ doneButtonText }}</button>\r\n        <button [class]=\"clearButtonClass\" *ngIf=\"showClearButton\" (click)=\"clearPad()\">{{ clearButtonText }}</button>\r\n    </div>\r\n</div>\r\n`,\n    styles: [`.signature-pad canvas{background:#f2f2f2}.signature-pad .btn{margin-right:.25em}`]\n})\nexport class SignaturePadComponent implements OnInit, AfterViewInit {\n\n    private signaturePad: SignaturePad;\n    @ViewChild('canvas', {read: ElementRef}) canvasRef: ElementRef;\n\n    @Input() points: any[] = [];\n    @Output() pointsChange = new EventEmitter<any>();\n\n    @Input() editable = true;\n    @Input() emitOnDragEnd = false;\n\n    @Input() penColor = 'black';\n    @Input() backgroundColor = 'transparent';\n\n    @Input() showDoneButton = true;\n    @Input() doneButtonText = 'Done';\n    @Input() doneButtonClass = 'btn btn-primary';\n    @Input() showClearButton = true;\n    @Input() clearButtonText = 'Clear';\n    @Input() clearButtonClass = 'btn btn-default';\n\n    @Input() format: 'blob' | 'base64' | 'json' = 'blob';\n\n    @Input() height = 150;\n    @Input() width = 600;\n\n    @Output() done = new EventEmitter();\n    @Output() cleared = new EventEmitter();\n\n    @Input() responsive = true;\n\n    constructor() {\n    }\n\n    ngOnInit() {\n    }\n\n    ngAfterViewInit() {\n        // Resize Canvas to full screen:\n        if (this.responsive) {\n            window.addEventListener('resize', () => {\n                this.resizeCanvas();\n            });\n            this.resizeCanvas();\n        }\n        this.initPad();\n    }\n\n    initPad() {\n        this.signaturePad = new SignaturePad(this.canvasRef.nativeElement, {\n            penColor: this.penColor,\n            backgroundColor: this.backgroundColor\n        });\n        this.signaturePad.penColor = this.penColor;\n\n        if (this.editable) {\n            this.signaturePad.on();\n        } else {\n            this.signaturePad.off();\n        }\n\n        this.signaturePad.onEnd = () => {\n            this.emitPoints();\n            if (this.emitOnDragEnd) {\n                this.emitBlob();\n            }\n        };\n\n        this.applyPoints();\n        if (this.emitOnDragEnd) {\n            this.emitBlob();\n        }\n    }\n\n    clearPad() {\n        this.signaturePad.clear();\n        this.cleared.emit();\n        this.emitPoints();\n        if (this.emitOnDragEnd) {\n            this.emitBlob();\n        }\n    }\n\n    applyPoints() {\n\n        if (!this.points || !this.signaturePad) { return; }\n\n        this.signaturePad.clear();\n\n        const multiplier = this.canvasRef.nativeElement.offsetWidth / this.width;\n\n        const points = JSON.parse(JSON.stringify(this.points));\n        points.forEach(group => {\n            group.points.forEach(pt => {\n                pt.x = pt.x * multiplier;\n                pt.y = pt.y * multiplier;\n            });\n        });\n        this.signaturePad.fromData(points);\n    }\n\n    emitPoints() {\n        const multiplier = this.canvasRef.nativeElement.offsetWidth / this.width;\n        const points = JSON.parse(JSON.stringify(this.signaturePad.toData()));\n        points.forEach(group => {\n            group.points.forEach(pt => {\n                pt.x = pt.x / multiplier;\n                pt.y = pt.y / multiplier;\n            });\n        });\n        this.pointsChange.emit(points);\n    }\n\n    emitPointsAndBlob() {\n        this.emitPoints();\n        this.emitBlob();\n    }\n\n    emitBlob() {\n\n        switch (this.format) {\n\n            case 'base64':\n                this.done.emit(this.signaturePad.toDataURL());\n                break;\n\n            case 'json':\n                this.done.emit(this.signaturePad.toData());\n                break;\n\n            default:\n                this.canvasRef.nativeElement.toBlob((blob) => {\n                    this.done.emit(blob);\n                });\n                break;\n        }\n\n    }\n\n\n    resizeCanvas() {\n\n        const canvas = this.canvasRef.nativeElement;\n        if (!canvas) { return; }\n\n        const pad = canvas.closest('.signature-pad') as HTMLElement;\n        if (!pad) { return; }\n\n        const w = pad.offsetWidth;\n        const h = pad.offsetWidth / (this.width / this.height);\n\n        canvas.setAttribute('width', `${w}`);\n        canvas.setAttribute('height', `${h}`);\n\n        this.applyPoints();\n\n    }\n\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
